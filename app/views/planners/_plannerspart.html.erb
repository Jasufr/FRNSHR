<div class="container">
  <h1>Planner</h1>
  <h4>Your current swatch:</h4>
  <div class ="colorarea">
    <%total_item_no = @planners.count%>
    <% if @planners.count.positive?%>
      <%colored_items = @planners.joins(:item).group('items.color').count%>
      <%colored_items.each do |key, value|%>
        <div style="background-color: <%= key %>; width: <%= value.to_f/total_item_no*100 %>%;">
          <%=key%>
          <%=value%>
          <%=value.to_f/total_item_no*100%>%</div>
      <%end%>
    <%else%>
      <p>no items are added to your plan yet</p>
    <%end%>
  </div>
  <h4>Your planned items:</h4>
  <div class="row">
    <%@planners.each do |planner|%>
      <div class="col-lg-4 col-md-6 col-sm-12 mb-3">
        <div class="card">
          <%= image_tag "#{planner.item.photo}"%>
          <div class="card-body">
            <%= planner.item.name %>
          </div>
          <div><%= link_to "Delete",planner_path(planner),data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}%></div>
        </div>
      </div>
    <%end%>
  </div>
  <div class="d-flex justify-content-center">
    <button type="button" class="btn btn-primary">Send my plan to me</button>
  </div>
</div>
